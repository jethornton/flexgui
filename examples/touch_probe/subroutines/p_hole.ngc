o<p_hole> sub
o100 if [#<_ini[TOOLSENSOR]LINEAR_UNITS> EQ 1]
	G20
	(debug, inch)
o100 else
	G21
	(debug, metric)
o100 endif
F#<_ini[TOOLSENSOR]SEARCH_FEED>

#1000 = #<_ini[TOOLSENSOR]PROBE_HOLE_MAX_RAD>

G91 G38.3 Z.00001
#1001=#5061
#1002=#5062

G91 G38.2 X#1000
#1003=#5061
G90 G0 X#1001
G91 G38.2 X[0-#1000]
#1004=#5061
#1001=[[#1003+#1004]/2]
G90 G0 X#1001

G91 G38.2 Y#1000
#1005=#5062
G90 G0 Y#1002
G91 G38.2 Y[0-#1000]
#1006=#5062
#1002=[[#1005+#1006]/2]
G90 G0 Y#1002

G91 G38.2 X#1000
#1003=#5061
G90 G0 X#1001
G91 G38.2 X[0-#1000]
#1004=#5061
#1001=[[#1003+#1004]/2]
G90 G0 X#1001

G91 G38.2 Y#1000
#1005=#5062
G90 G0 Y#1002
G91 G38.2 Y[0-#1000]
#1006=#5062
#1002=[[#1005+#1006]/2]
G90 G0 Y#1002

F#<_ini[TOOLSENSOR]PROBE_FEED>

o101 if [#<_ini[TOOLSENSOR]LINEAR_UNITS> EQ 1]
	G90 G0 X[#1003-0.005]
	G91 G38.2 X0.010
	#1003=#5061
	G90 G0 X[#1004+0.005]
	G91 G38.2 X-0.010
	#1004=#5061
	#1001=[[#1003+#1004]/2]
	G90 G0 X#1001

	G90 G0 Y[#1005-0.005]
	G91 G38.2 Y0.010
	#1005=#5062
	G90 G0 Y[#1006+0.005]
	G91 G38.2 Y-0.010
	#1006=#5062
	#1002=[[#1005+#1006]/2]
	G90 G0 Y#1002

	#1007=[#1003-#1004+[6.0/25.4]]
	#1008=[#1005-#1006+[6.0/25.4]]
	#1009=[[#1007+#1008]/2]
	#1010=[atan[#1002]/[#1001]]
	#1011=[sqrt[[#1001*#1001]+[#1002*#1002]]]
o101 else
	G90 G0 X[#1003-0.127]
	G91 G38.2 X0.254
	#1003=#5061
	G90 G0 X[#1004+0.127]
	G91 G38.2 X-0.254
	#1004=#5061
	#1001=[[#1003+#1004]/2]
	G90 G0 X#1001

	G90 G0 Y[#1005-0.127]
	G91 G38.2 Y0.254
	#1005=#5062
	G90 G0 Y[#1006+0.127]
	G91 G38.2 Y-0.254
	#1006=#5062
	#1002=[[#1005+#1006]/2]
	G90 G0 Y#1002

	#1007=[#1003 - #1004 + 6.0]
	#1008=[#1005 - #1006 + 6.0]
	#1009=[[#1007 + #1008]/2]
	#1010=[atan[#1002]/[#1001]]
	#1011=[sqrt[[#1001*#1001]+[#1002*#1002]]]
o101 endif

(debug,Xdia #1007 Ydia #1008 Dia #1009 Ang #1010 Dist #1011)
o<p_hole> endsub

M2
